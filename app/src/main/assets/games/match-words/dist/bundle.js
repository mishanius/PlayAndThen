(()=>{"use strict";var t={842(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MatchWordsGame=void 0,e.MatchWordsGame=class{constructor(t){this.gameActive=!1,this.wordImagePairs=[{word:"Apple",emoji:"ðŸŽ",audioFile:"apple.ogg"},{word:"Cat",emoji:"ðŸ±",audioFile:"cat.ogg"},{word:"Sun",emoji:"â˜€ï¸",audioFile:"sun.ogg"},{word:"Tree",emoji:"ðŸŒ³",audioFile:"tree.ogg"},{word:"Car",emoji:"ðŸš—",audioFile:"car.ogg"},{word:"House",emoji:"ðŸ ",audioFile:"house.ogg"},{word:"Star",emoji:"â­",audioFile:"star.ogg"},{word:"Heart",emoji:"â¤ï¸",audioFile:"heart.ogg"},{word:"Book",emoji:"ðŸ“š",audioFile:"book.ogg"},{word:"Ball",emoji:"âš½",audioFile:"ball.ogg"}],this.selectedPairs=[],this.shuffledEmojis=[],this.matches=new Map,this.isDrawing=!1,this.startWordIndex=-1,this.currentX=0,this.currentY=0,this.wordElements=[],this.emojiElements=[],this.currentAudio=null,this.config=t,this.gameContainer=document.getElementById("game-container"),this.canvas=document.createElement("canvas"),this.canvas.id="match-canvas",this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.pointerEvents="none",this.canvas.style.zIndex="10",this.gameContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas()),this.startGame()}resizeCanvas(){this.canvas.width=this.gameContainer.offsetWidth,this.canvas.height=this.gameContainer.offsetHeight,this.redrawLines()}startGame(){this.setupGame(),setTimeout(()=>{this.playInstructionSound()},500)}setupGame(){this.gameContainer.innerHTML="",this.gameContainer.appendChild(this.canvas),this.selectedPairs=[...this.wordImagePairs].sort(()=>Math.random()-.5).slice(0,3),this.shuffledEmojis=[...this.selectedPairs.map(t=>t.emoji)].sort(()=>Math.random()-.5);const t=document.createElement("div");t.className="match-words-layout";const e=document.createElement("div");e.className="words-column",this.wordElements=[],this.selectedPairs.forEach((t,i)=>{const s=this.createWordElement(t.word,i);e.appendChild(s),this.wordElements.push(s)});const i=document.createElement("div");i.className="emojis-column",this.emojiElements=[],this.shuffledEmojis.forEach((t,e)=>{const s=this.createEmojiElement(t,e);i.appendChild(s),this.emojiElements.push(s)}),t.appendChild(e),t.appendChild(i),this.gameContainer.appendChild(t),this.matches.clear(),this.gameActive=!0,setTimeout(()=>this.resizeCanvas(),100)}createWordElement(t,e){const i=document.createElement("div");return i.className="word-item",i.textContent=t,i.dataset.index=e.toString(),i.addEventListener("mousedown",t=>this.startDrawing(t,e)),i.addEventListener("touchstart",t=>this.startDrawing(t,e)),i}createEmojiElement(t,e){const i=document.createElement("div");return i.className="emoji-item",i.textContent=t,i.dataset.index=e.toString(),i.addEventListener("mouseup",t=>this.endDrawing(t,e)),i.addEventListener("touchend",t=>this.endDrawing(t,e)),i}startDrawing(t,e){if(!this.gameActive)return;t.preventDefault(),this.isDrawing=!0,this.startWordIndex=e;const i=this.wordElements[e],s=i.getBoundingClientRect(),n=this.gameContainer.getBoundingClientRect();this.currentX=s.right-n.left,this.currentY=s.top+s.height/2-n.top,i.classList.add("drawing");const o=t=>this.updateDrawing(t);document.addEventListener("mousemove",o),document.addEventListener("touchmove",o);const r=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("touchmove",o),document.removeEventListener("mouseup",r),document.removeEventListener("touchend",r),this.isDrawing&&this.cancelDrawing()};document.addEventListener("mouseup",r),document.addEventListener("touchend",r)}updateDrawing(t){if(!this.isDrawing)return;const e=this.gameContainer.getBoundingClientRect();if(t instanceof MouseEvent)this.currentX=t.clientX-e.left,this.currentY=t.clientY-e.top;else{const i=t.touches[0];this.currentX=i.clientX-e.left,this.currentY=i.clientY-e.top}this.redrawLines(),this.drawCurrentLine()}endDrawing(t,e){if(!this.isDrawing||-1===this.startWordIndex)return;t.preventDefault(),this.isDrawing=!1,this.wordElements[this.startWordIndex].classList.remove("drawing");const i=this.selectedPairs[this.startWordIndex],s=this.shuffledEmojis[e];i.emoji===s?(this.matches.set(this.startWordIndex,e),this.wordElements[this.startWordIndex].classList.add("matched"),this.emojiElements[e].classList.add("matched"),this.redrawLines(),this.matches.size===this.selectedPairs.length&&(this.gameActive=!1,this.playFeedbackSound(!0),setTimeout(()=>{window.Android&&window.Android.onGameCompleted()},2e3))):(this.emojiElements[e].classList.add("wrong"),setTimeout(()=>{this.emojiElements[e].classList.remove("wrong")},500)),this.startWordIndex=-1}cancelDrawing(){this.isDrawing=!1,-1!==this.startWordIndex&&this.wordElements[this.startWordIndex].classList.remove("drawing"),this.startWordIndex=-1,this.redrawLines()}drawCurrentLine(){if(!this.isDrawing||-1===this.startWordIndex)return;const t=this.wordElements[this.startWordIndex].getBoundingClientRect(),e=this.gameContainer.getBoundingClientRect(),i=t.right-e.left,s=t.top+t.height/2-e.top;this.ctx.strokeStyle="#667eea",this.ctx.lineWidth=4,this.ctx.lineCap="round",this.ctx.setLineDash([5,5]),this.ctx.beginPath(),this.ctx.moveTo(i,s),this.ctx.lineTo(this.currentX,this.currentY),this.ctx.stroke(),this.ctx.setLineDash([])}redrawLines(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const t=this.gameContainer.getBoundingClientRect();this.matches.forEach((e,i)=>{const s=this.wordElements[i],n=this.emojiElements[e],o=s.getBoundingClientRect(),r=n.getBoundingClientRect(),a=o.right-t.left,d=o.top+o.height/2-t.top,h=r.left-t.left,c=r.top+r.height/2-t.top;this.ctx.strokeStyle="#4CAF50",this.ctx.lineWidth=4,this.ctx.lineCap="round",this.ctx.beginPath(),this.ctx.moveTo(a,d),this.ctx.lineTo(h,c),this.ctx.stroke()})}playAudio(t,e){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.currentAudio=new Audio(t),this.currentAudio.volume=1,this.currentAudio.addEventListener("ended",()=>{this.currentAudio=null,e&&e()}),this.currentAudio.addEventListener("error",t=>{console.error("Audio playback error:",t),this.currentAudio=null,e&&e()}),this.currentAudio.play().catch(t=>{console.error("Failed to play audio:",t)})}playInstructionSound(){const t=this.getAudioFiles();this.playAudio(t.instruction)}playFeedbackSound(t){const e=this.getAudioFiles(),i=t?e.wellDone:e.tryAgain;this.playAudio(i)}getAudioFiles(){return{instruction:"audio/instructions_match_words.ogg",target:"audio/instructions_match_words.ogg",wellDone:"audio/well_done.ogg",tryAgain:"audio/try_again.ogg"}}reset(){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.setupGame()}destroy(){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.gameActive=!1,window.removeEventListener("resize",()=>this.resizeCanvas())}}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,i),o.exports}(()=>{const t=i(842);let e=null;window.initGame=i=>{console.log("Initializing Match Words game with config:",i),e&&e.destroy(),e=new t.MatchWordsGame(i)},window.resetGame=()=>{console.log("Resetting Match Words game"),e&&e.reset()},window.addEventListener("DOMContentLoaded",()=>{console.log("Match Words game page loaded and ready")})})()})();