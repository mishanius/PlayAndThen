(()=>{"use strict";var e={613(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CellState=void 0,function(e){e.DEFAULT="default",e.CORRECT="correct",e.INCORRECT="incorrect"}(i||(t.CellState=i={}))},812(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.NumbersGame=void 0;const o=i(613);class r{constructor(e){this.gameActive=!1,this.introPlayed=!1,this.targetNumber=0,this.correctCellIndex=0,this.currentAudio=null,this.config=e,this.gameContainer=document.getElementById("game-container"),this.hugeTextElement=document.getElementById("huge-text"),this.characterContainer=document.getElementById("character-container"),this.cells=Array.from(document.querySelectorAll(".cell")),this.initializeUI()}initializeUI(){this.characterContainer.addEventListener("click",()=>{this.introPlayed?this.gameActive&&this.playTargetSound():(this.introPlayed=!0,this.playInstructionSound())}),this.cells.forEach((e,t)=>{e.addEventListener("click",()=>{this.gameActive&&this.handleCellClick(t)})}),this.startGame()}startGame(){this.setupGame();const e=void 0!==window.Android;console.log("startGame: hasAndroidBridge =",e),e&&(setTimeout(()=>this.playInstructionSound(),500),this.introPlayed=!0)}setupGame(){this.cells.forEach(e=>{e.innerHTML="",this.setCellState(e,o.CellState.DEFAULT)}),this.populateCells(),this.hugeTextElement.style.display="none",this.gameActive=!0}populateCells(){this.targetNumber=Math.floor(11*Math.random()),this.correctCellIndex=Math.floor(6*Math.random()),this.generateCounts().forEach((e,t)=>{this.cells[t].appendChild(this.createNumberElement(e))})}generateCounts(){const e=new Array(6),t=new Set([this.targetNumber]);e[this.correctCellIndex]=this.targetNumber;for(let i=0;i<6;i++){if(i===this.correctCellIndex)continue;let o;do{o=Math.floor(11*Math.random())}while(t.has(o));e[i]=o,t.add(o)}return e}createNumberElement(e){const t=document.createElement("div");return t.className="number-text",t.textContent=e.toString(),t.style.color=r.NUMBER_COLORS[Math.floor(Math.random()*r.NUMBER_COLORS.length)],t}handleCellClick(e){this.gameActive=!1,e===this.correctCellIndex?(this.setCellState(this.cells[e],o.CellState.CORRECT),this.playFeedbackSound(!0),setTimeout(()=>{window.Android&&window.Android.onGameCompleted()},2e3)):(this.setCellState(this.cells[e],o.CellState.INCORRECT),this.cells.forEach((e,t)=>{t===this.correctCellIndex&&this.setCellState(e,o.CellState.CORRECT)}),this.playFeedbackSound(!1),setTimeout(()=>{this.setupGame(),this.playTargetSound()},3e3))}setCellState(e,t){e.classList.remove("cell-default","cell-correct","cell-incorrect"),e.classList.add(`cell-${t}`)}playAudio(e,t){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.currentAudio=new Audio(e),this.currentAudio.volume=1,this.currentAudio.addEventListener("ended",()=>{this.currentAudio=null,t&&t()}),this.currentAudio.addEventListener("error",()=>{this.currentAudio=null,t&&t()}),this.currentAudio.play().catch(console.error)}playInstructionSound(){const e=this.getAudioFiles();this.playAudio(e.instruction,()=>{setTimeout(()=>{this.gameActive&&this.playTargetSound()},50)})}playTargetSound(){this.playAudio(this.getAudioFiles().target)}playFeedbackSound(e){const t=this.getAudioFiles();this.playAudio(e?t.wellDone:t.tryAgain)}getAudioFiles(){const e=void 0!==window.Android&&navigator.userAgent.includes("Android")?"file:///android_asset/games/audio":"../../audio";return{instruction:`${e}/instructions_numbers_mode.ogg`,target:`${e}/${["zero.ogg","one.ogg","two.ogg","three.ogg","four.ogg","five.ogg","six.ogg","seven.ogg","eight.ogg","nine.ogg","ten.ogg"][this.targetNumber]}`,wellDone:`${e}/well_done.ogg`,tryAgain:`${e}/try_again.ogg`}}reset(){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.setupGame()}destroy(){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.gameActive=!1}}t.NumbersGame=r,r.NUMBER_COLORS=["#FF69B4","#FF4500","#32CD32","#FF1493","#00BFFF","#FFD700","#FF6347","#9370DB","#00CED1","#FFA500"]}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,i),n.exports}(()=>{const e=i(812);let t=null;window.initGame=i=>{console.log("Initializing Numbers game with config:",i),t&&t.destroy(),t=new e.NumbersGame(i)},window.resetGame=()=>{console.log("Resetting Numbers game"),t&&t.reset()},window.addEventListener("DOMContentLoaded",()=>{console.log("Numbers game page loaded and ready")})})()})();