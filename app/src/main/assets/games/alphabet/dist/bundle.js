(()=>{"use strict";var e={613(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CellState=void 0,function(e){e.DEFAULT="default",e.CORRECT="correct",e.INCORRECT="incorrect"}(i||(t.CellState=i={}))},803(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AlphabetGame=void 0;const r=i(613);class l{constructor(e){this.gameActive=!1,this.introPlayed=!1,this.targetIndex=0,this.correctCellIndex=0,this.currentAudio=null,this.config=e,this.gameContainer=document.getElementById("game-container"),this.characterContainer=document.getElementById("character-container"),this.cells=Array.from(document.querySelectorAll(".cell")),this.initializeUI()}initializeUI(){this.characterContainer.addEventListener("click",()=>{this.introPlayed?this.gameActive&&this.playTargetSound():(this.introPlayed=!0,this.playInstructionSound())}),this.cells.forEach((e,t)=>{e.addEventListener("click",()=>{this.gameActive&&this.handleCellClick(t)})}),this.startGame()}startGame(){this.setupGame(),void 0!==window.Android&&(setTimeout(()=>this.playInstructionSound(),500),this.introPlayed=!0)}setupGame(){this.cells.forEach(e=>{e.innerHTML="",this.setCellState(e,r.CellState.DEFAULT)}),this.populateCells(),this.gameActive=!0}populateCells(){this.targetIndex=Math.floor(3*Math.random()),this.correctCellIndex=Math.floor(3*Math.random());const e=[0,1,2].sort(()=>Math.random()-.5),t=e.indexOf(this.targetIndex);t!==this.correctCellIndex&&([e[t],e[this.correctCellIndex]]=[e[this.correctCellIndex],e[t]]),e.forEach((e,t)=>{this.cells[t].appendChild(this.createLetterElement(e))})}createLetterElement(e){const t=document.createElement("div");return t.className="letter-text",t.textContent=l.LETTERS[e],t.style.color=l.LETTER_COLORS[e],t}handleCellClick(e){this.gameActive=!1,e===this.correctCellIndex?(this.setCellState(this.cells[e],r.CellState.CORRECT),this.playFeedbackSound(!0),setTimeout(()=>{window.Android&&window.Android.onGameCompleted()},2e3)):(this.setCellState(this.cells[e],r.CellState.INCORRECT),this.setCellState(this.cells[this.correctCellIndex],r.CellState.CORRECT),this.playFeedbackSound(!1),setTimeout(()=>{this.setupGame(),this.playTargetSound()},3e3))}setCellState(e,t){e.classList.remove("cell-default","cell-correct","cell-incorrect"),e.classList.add(`cell-${t}`)}playAudio(e,t){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.currentAudio=new Audio(e),this.currentAudio.volume=1,this.currentAudio.addEventListener("ended",()=>{this.currentAudio=null,t&&t()}),this.currentAudio.addEventListener("error",()=>{this.currentAudio=null,t&&t()}),this.currentAudio.play().catch(console.error)}playInstructionSound(){this.playAudio(this.getAudioFiles().instruction,()=>{setTimeout(()=>{this.gameActive&&this.playTargetSound()},50)})}playTargetSound(){this.playAudio(this.getAudioFiles().target)}playFeedbackSound(e){const t=this.getAudioFiles();this.playAudio(e?t.wellDone:t.tryAgain)}getAudioFiles(){const e=void 0!==window.Android&&navigator.userAgent.includes("Android")?"file:///android_asset/games/audio":"../../audio";return{instruction:`${e}/instructions_alphabet_mode.ogg`,target:`${e}/${l.LETTER_AUDIO[this.targetIndex]}`,wellDone:`${e}/well_done.ogg`,tryAgain:`${e}/try_again.ogg`}}reset(){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.setupGame()}destroy(){this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.gameActive=!1}}t.AlphabetGame=l,l.LETTERS=["א","ב","ג"],l.LETTER_AUDIO=["aleph.ogg","bet.ogg","gimel.ogg"],l.LETTER_COLORS=["#FF69B4","#32CD32","#00BFFF"]}},t={};function i(r){var l=t[r];if(void 0!==l)return l.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}(()=>{const e=i(803);document.addEventListener("DOMContentLoaded",()=>{window.game=new e.AlphabetGame({containerId:"game-container"})})})()})();